---
const pathname = new URL(Astro.request.url).pathname
const currentPath = pathname.slice(1) // remove the first "/"
---

<nav>
  <a id='home-link' href='/'
    >evangelos<span id='home-link__dot'>.</span><span id='home-link__ai'
      >ai</span
    ></a
  >
  <ul>
    <li>
      <a href='/blog' class={currentPath === 'blog' ? 'active' : ''}>Blog</a>
    </li>
    <li>
      <a
        href='https://scholar.google.com/citations?user=H0FOMNcAAAAJ&hl=en'
        class={currentPath === 'papers' ? 'active' : ''}>Papers</a
      >
    </li>
    <li>
      <a
        href='https://gtihub.com/evangelos-ch'
        class={currentPath === 'code' ? 'active' : ''}>Code</a
      >
    </li>
  </ul>
</nav>

<script>
  addEventListener('scroll', (event) => {
    const scrollTop = window.scrollY
    const docHeight = document.body.scrollHeight
    const winHeight = window.innerHeight
    const scrollPercent = scrollTop / (docHeight - winHeight)
    if (scrollPercent * 100 > 50) {
      document.querySelector('nav').style.transform = 'translate(0, 0)'
      document.getElementById('header').style.opacity = '0'
      document.getElementById('content-container').classList.add('no-bg')
      document.getElementById('container').classList.add('scroll-bg')
    } else {
      document.querySelector('nav').style.transform = 'translate(0, -150%)'
      document.getElementById('header').style.opacity = '1'
      document.getElementById('content-container').classList.remove('no-bg')
      document.getElementById('container').classList.remove('scroll-bg')
    }
  })
</script>

<style lang='scss'>
  nav {
    position: fixed;
    width: 100%;
    top: 0;
    transform: translate(0, -150%);
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    padding-top: 1.25rem;
    padding-left: 2rem;
    padding-right: 2rem;
    height: 6rem;
    z-index: 999;
    transition: transform 0.3s ease-out;

    > * {
      z-index: 999;
    }

    &:before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      height: 100%;
      max-height: 6rem;
      width: 100%;
      background: linear-gradient(180deg, #0c191d 0%, black 100%);
      z-index: 998;
      border-bottom-left-radius: 50%;
      border-bottom-right-radius: 50%;
      transform: scaleX(1.2);
      box-shadow: 0 0 60px var(--primary-400);
    }
  }

  #home-link {
    text-decoration: none;
    color: var(--grey-100);
    font-family: 'Overpass', sans-serif;
    font-weight: 700;
    font-size: 2.25rem;
    line-height: 0.8;

    &__dot {
      color: var(--accent-500);
    }

    &__ai {
      color: var(--primary-500);
      font-family: 'DM Mono', monospace;
      font-weight: 500;
    }
  }

  ul {
    padding: 0;
    display: flex;
    flex-direction: row;
    gap: 0.5rem;
  }

  li {
    display: inline-block;
    list-style: none;
    text-transform: uppercase;
    font-family: 'DM Mono', monospace;
    font-weight: 400;
    font-size: 1.875rem;
    letter-spacing: 0.05em;
    color: var(--grey-100);

    > a {
      padding: 0.25rem 1rem;

      &.active {
        background-image: var(--primary-gradient);
        transition: filter 0.2s ease-out;

        &:hover {
          filter: brightness(1.1);
          text-shadow: none;
        }
      }
    }
  }

  a {
    text-decoration: none;
    color: inherit;
    transition: text-shadow 0.2s ease-out;

    &:hover {
      text-shadow: 0 0 10px var(--accent-100);
    }
  }
</style>
